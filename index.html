<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>Learneasy AI</title>
</head>
<body style="font-family: sans-serif; text-align: center; padding: 20px; background: #f4f7f6;">
    <h1>Learneasy.uz AI Yordamchisi</h1>
    <div id="chat" style="max-width: 500px; margin: auto; height: 400px; border: 1px solid #ddd; overflow-y: auto; padding: 15px; background: white; border-radius: 10px; text-align: left;"></div>
    <div style="margin-top: 15px;">
        <input type="text" id="inp" placeholder="Savol so'rang..." style="width: 300px; padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
        <button onclick="ask()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Yuborish</button>
    </div>

    <script type="module">
        import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";
        
        // MANA SHU YERGA BOYAGI NUSXALAGAN KODNI QO'YING
        const API_KEY = "AIzaSyCPuL1daHvCl-XvMPkCzCbZg12yOYbFrMM"; 
        
        const genAI = new GoogleGenerativeAI(API_KEY);

        window.ask = async () => {
            const i = document.getElementById('inp');
            const c = document.getElementById('chat');
            if(!i.value.trim()) return;

            c.innerHTML += `<div style="margin-bottom:10px;"><b>Siz:</b> ${i.value}</div>`;
            const text = i.value;
            i.value = "";

            try {
                const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
                const result = await model.generateContent(text);
                const response = await result.response;
                c.innerHTML += `<div style="color: blue; margin-bottom:10px;"><b>AI:</b> ${response.text()}</div>`;
            } catch (e) {
                c.innerHTML += `<div style="color: red;">Xato yuz berdi!</div>`;
            }
            c.scrollTop = c.scrollHeight;
        }
    </script>
</body>
</html>
