<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learneasy AI | Day Mode</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Yorug' rejim asosiy ranglari */
        body { background: #fafafa; font-family: -apple-system, sans-serif; color: #262626; }
        
        /* Instagram Gradient */
        .insta-gradient {
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
        }

        .ai-chat-container { background: white; border-left: 1px solid #dbdbdb; }
        
        /* Chat xabarlari stili */
        .user-msg { background: #0095f6; color: white; border-radius: 18px 18px 4px 18px; shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .ai-msg { background: #efefef; color: #262626; border-radius: 18px 18px 18px 4px; border: 1px solid #e0e0e0; }
        
        #chat-flow::-webkit-scrollbar { width: 4px; }
        #chat-flow::-webkit-scrollbar-thumb { background: #dbdbdb; border-radius: 10px; }
        
        .premium-card {
            background: white;
            border: 2px solid;
            border-image: linear-gradient(45deg, #f09433, #bc1888) 1;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }
        
        .hidden { display: none !important; }
    </style>
</head>
<body class="overflow-hidden">

    <div class="flex h-screen flex-col md:flex-row">
        
        <div id="home-panel" class="flex-1 overflow-y-auto p-4 md:p-8 bg-white">
            <header class="flex justify-between items-center mb-8 sticky top-0 bg-white/80 backdrop-blur-md z-10 py-2">
                <h1 class="text-3xl font-black italic tracking-tighter text-blue-600">LEARNEASY</h1>
                <div class="flex gap-5 text-xl">
                    <i class="fa-regular fa-square-plus cursor-pointer hover:text-blue-500"></i>
                    <i class="fa-regular fa-heart cursor-pointer hover:text-red-500"></i>
                </div>
            </header>

            <div class="max-w-md mx-auto bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden mb-10">
                <div class="p-3 flex items-center gap-3">
                    <div class="w-9 h-9 rounded-full insta-gradient p-[2px]">
                        <div class="w-full h-full rounded-full bg-white flex items-center justify-center text-[10px] font-bold">LE</div>
                    </div>
                    <span class="text-sm font-bold">learneasy.uz</span>
                    <i class="fa-solid fa-circle-check text-blue-500 text-[10px]"></i>
                </div>
                
                <div class="aspect-video bg-gray-50 flex flex-col items-center justify-center border-y border-gray-100">
                    <i class="fa-solid fa-book-open-reader text-5xl text-blue-200"></i>
                    <p class="text-xs text-gray-400 mt-2 font-medium">Video darsliklar paneli</p>
                </div>

                <div class="p-4">
                    <div class="flex gap-4 mb-3 text-xl text-gray-700">
                        <i class="fa-regular fa-heart cursor-pointer hover:text-red-500"></i>
                        <i class="fa-regular fa-comment"></i>
                        <i class="fa-regular fa-paper-plane md:hidden text-blue-500" onclick="alert('AI Chatga o\'ting!')"></i>
                    </div>
                    <p class="text-sm font-extrabold mb-1">1,204 likes</p>
                    <p class="text-sm leading-snug">
                        <span class="font-bold">learneasy.uz</span> Biz bilan ilm olish yanada oson. Matematika va Fizikadan eng qiyin misollarni AI yordamchisiga bering! ðŸ“šâœ¨
                    </p>
                </div>
            </div>
        </div>

        <div id="ai-panel" class="w-full md:w-[450px] ai-chat-container flex flex-col shadow-xl">
            <div class="p-4 border-b border-gray-100 flex justify-between items-center bg-white">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-2xl bg-blue-50 flex items-center justify-center">
                        <i class="fa-solid fa-robot text-blue-600"></i>
                    </div>
                    <div>
                        <h2 class="text-sm font-bold text-gray-800">LearnEasy Professional AI</h2>
                        <span id="limit-badge" class="text-[10px] text-green-600 font-bold px-2 bg-green-50 rounded-full">8/8 imkoniyat</span>
                    </div>
                </div>
                <button onclick="location.reload()" class="text-gray-400 hover:text-blue-500 transition"><i class="fa-solid fa-arrows-rotate"></i></button>
            </div>

            <div id="chat-flow" class="flex-1 overflow-y-auto p-5 space-y-5">
                <div class="ai-msg p-4 text-sm shadow-sm">
                    <p class="font-bold text-blue-600 mb-1">Xush kelibsiz! ðŸ‘‹</p>
                    Men <b>Learneasy.uz</b> AI agentiman. Sizga matematika, fizika, kimyo va tillarni o'rganishda professional yordam beraman. 
                    <br><br>
                    <span class="text-[11px] bg-white/50 p-1 rounded italic underline">Hozirda 8 ta bepul savol berish imkoningiz bor.</span>
                </div>
            </div>

            <div id="premium-blocker" class="p-6 bg-gray-50 border-t border-gray-200 hidden">
                <div class="text-center">
                    <div class="w-14 h-14 rounded-full bg-white shadow-md mx-auto flex items-center justify-center mb-4">
                        <i class="fa-solid fa-crown text-amber-500 text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-lg text-gray-800">Limit yakunlandi</h3>
                    <p class="text-xs text-gray-500 mb-5 leading-relaxed">Sizning 8 ta bepul savolingiz tugadi. Bilimlar olamiga cheksiz sho'ng'ish uchun Premiumga o'ting.</p>
                    
                    <div class="premium-card p-5 mb-5 rounded-xl">
                        <p class="text-2xl font-black text-gray-900">12 000 so'm <span class="text-xs text-gray-400 font-normal">/ oyiga</span></p>
                        <hr class="my-3 border-gray-100">
                        <p class="text-[10px] uppercase tracking-widest text-gray-400 mb-1">To'lov uchun karta:</p>
                        <p class="text-sm font-mono font-bold text-blue-600">4916 9903 2276 6145</p>
                    </div>
                    
                    <button class="w-full py-4 rounded-xl insta-gradient text-white font-bold text-sm shadow-lg shadow-pink-200 active:scale-95 transition">
                        PREMIUMGA O'TISH
                    </button>
                </div>
            </div>

            <div id="input-area" class="p-4 bg-white border-t border-gray-100">
                <div class="flex gap-2 items-center bg-gray-100 rounded-2xl p-1 border-2 border-transparent focus-within:border-blue-400 focus-within:bg-white transition-all">
                    <input type="text" id="user-input" placeholder="Savolingizni bering..." class="flex-1 bg-transparent outline-none px-4 text-sm font-medium py-3 text-gray-800">
                    <button id="send-btn" class="bg-blue-600 text-white h-10 px-6 rounded-xl font-bold text-xs uppercase shadow-md shadow-blue-200 active:scale-90 transition-all">Yuborish</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = "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";
        let limit = localStorage.getItem('ai_limit_v2') ? parseInt(localStorage.getItem('ai_limit_v2')) : 8;

        function updateLimitUI() {
            const badge = document.getElementById('limit-badge');
            badge.innerText = `${limit}/8 imkoniyat`;
            if (limit <= 0) {
                document.getElementById('input-area').classList.add('hidden');
                document.getElementById('premium-blocker').classList.remove('hidden');
                badge.className = "text-[10px] text-red-600 font-bold px-2 bg-red-50 rounded-full";
            }
        }
        updateLimitUI();

        async function callAI(msg) {
            try {
                const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${API_KEY}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        "model": "google/gemini-2.0-flash-exp:free",
                        "messages": [
                            {
                                "role": "system", 
                                "content": "Sen Learneasy.uz sayti uchun maxsus yaratilgan professional AI agentsan. Matematika, fizika, kimyo, biologiya va chet tillarini mukammal bilasan. Javoblaring aniq, ilmiy va tushunarli bo'lsin. Mustafobek tomonidan ishlab chiqilgansan. Har doim o'zbek tilida javob ber."
                            },
                            {"role": "user", "content": msg}
                        ]
                    })
                });
                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                return "Xatolik yuz berdi. Iltimos, internetingizni tekshirib qayta urinib ko'ring.";
            }
        }

        async function processChat() {
            const input = document.getElementById('user-input');
            const flow = document.getElementById('chat-flow');
            const val = input.value.trim();

            if(!val || limit <= 0) return;

            // User Message
            flow.innerHTML += `<div class="flex justify-end"><div class="user-msg p-4 text-sm max-w-[85%] shadow-sm">${val}</div></div>`;
            input.value = "";
            
            limit--;
            localStorage.setItem('ai_limit_v2', limit);
            updateLimitUI();

            // Loader
            const loader = document.createElement('div');
            loader.className = "text-[10px] font-bold text-blue-500 animate-pulse py-2 pl-2";
            loader.innerText = "Learneasy AI hisoblamoqda...";
            flow.appendChild(loader);
            flow.scrollTop = flow.scrollHeight;

            const result = await callAI(val);
            loader.remove();

            // AI Message
            flow.innerHTML += `<div class="ai-msg p-4 text-sm leading-relaxed max-w-[90%] shadow-sm"><b>Learneasy AI:</b><br>${result}</div>`;
            flow.scrollTop = flow.scrollHeight;
        }

        document.getElementById('send-btn').onclick = processChat;
        document.getElementById('user-input').onkeypress = (e) => { if(e.key === 'Enter') processChat(); };
    </script>
</body>
</html>
